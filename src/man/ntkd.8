.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "NetsukukuD 8"
.TH NetsukukuD 8 "2006-06-20" "NetsukukuD 0.0.9b (debug)" ""
.SH "NAME"
ntkd \- Netsukuku protocol daemon
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
ntkd [\-hvaldrD46] [\-i net_interface] [\-c conf_file] [\-l logfile]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Netsukuku is a mesh network or a P2P net system that generates and sustains
itself autonomously. It is designed to handle an unlimited number of nodes with
minimal \s-1CPU\s0 and memory resources. Thanks to this feature it can be easily
used to build a worldwide distributed, anonymous and anarchical network,
separated from the Internet, without the support of any servers, ISPs or
authority controls.
.PP
The complete features list of Netsukuku is here:
<http://netsukuku.freaknet.org/files/doc/misc/Ntk_features_list>
.PP
In order to join to Netsukuku you have to use \fBntkd\fR, which is the
daemon implementing the Npv7 protocol.
The daemon at startup takes the list of all the network interfaces which are
currently \s-1UP\s0 and it uses all of them to send and receive packets. If you want
to force the daemon to use specific interfaces you should use the \fB\-i\fR
option.
The ports it listens to are: 269\-udp, 269\-tcp, 277\-udp, 277\-tcp. So
be sure to open them in the firewall.
.PP
For more information about Netsukuku visit:
<http://netsukuku.freaknet.org>
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-4\fR, \fB\-\-ipv4\fR" 4
.IX Item "-4, --ipv4"
Forces the daemon to use ipv4 addresses only
.IP "\fB\-6\fR, \fB\-\-ipv6\fR" 4
.IX Item "-6, --ipv6"
Forces the daemon to use ipv6 addresses only. Warning, this is still
experimental.
.IP "\fB\-i\fR \fIinterface\fR, \fB\-\-iface\fR \fIinterface\fR" 4
.IX Item "-i interface, --iface interface"
Specifies the network interface the daemon will use to join Netsukuku, i.e.
wlan0. You can use more than one interface by specifying multiple times the
\&\fB\-i\fR option. For example: 
.Sp
.Vb 1
\&        ntkd -i wlan0 -i eth0 -i wifi1 -i eth1
.Ve
.IP "\fB\-a\fR, \fB\-\-no_andna\fR" 4
.IX Item "-a, --no_andna"
Forces \fBntkd\fR to don't run the \s-1ANDNA\s0 daemon when started.
.IP "\fB\-R\fR, \fB\-\-no_resolv\fR" 4
.IX Item "-R, --no_resolv"
When \fBNetsukukuD\fR starts it modifies \fI/etc/resolv.conf\fR writing in the first
line the string \*(L"nameserver 127.0.0.1\*(R". The old \fI/etc/resolv.conf\fR is copied in
\&\fI/etc/resolv.conf.bak\fR. When the daemon is closed \fI/etc/resolv.conf\fR is
restored. If you want to disable this set use the \fB\-R\fR option.
.IP "\fB\-r\fR\fI[bool]\fR, \fB\-\-restricted\fR=\fI[bool]\fR" 4
.IX Item "-r[bool], --restricted=[bool]"
With this option the daemon will run in restricted mode as specified in
the Npv7, only IPs of a private class will be chosen. It is used for
Internet compatibility. 
If no argument is given to the option, the default restricted private class
10.0.0.0 is used, otherwise if \fIbool\fR is not zero, the restricted class will
be 172.16.0.0\-172.31.255.255.
.IP "\fB\-I\fR, \fB\-\-share\-inet\fR" 4
.IX Item "-I, --share-inet"
Tells NetsukukuD to run in restricted mode (see \fB\-r\fR) and to share your
Internet connection. Please check the relative options in
\&\fI/etc/netsukuku/netsukuku.conf\fR
.IP "\fB\-D\fR, \fB\-\-no_daemon\fR" 4
.IX Item "-D, --no_daemon"
This option tells \fBntkd\fR to don't detach to background and
daemonizing itself. The daemon will run on foreground instead.
.IP "\fB\-c\fR \fIconfiguration_file\fR, \fB\-\-conf\fR \fIconfiguration_file\fR" 4
.IX Item "-c configuration_file, --conf configuration_file"
Specifies the name of the configuration file. The
default is /etc/netsukuku/netsukuku.conf. \fBntkd\fR will not start
without a configuration file.
.IP "\fB\-l\fR \fIlogfile\fR, \fB\-\-logfile\fR \fIlogfile\fR" 4
.IX Item "-l logfile, --logfile logfile"
Specifies that \fBntkd\fR should send all of its messages to the specified file.
The \fIlogfile\fR will be overwritten.
.IP "\fB\-d\fR, \fB\-\-debug\fR" 4
.IX Item "-d, --debug"
With this option the daemon will run with displaying its debug messages.
The more \-d you specify the more debug messages you'll get. Sometimes it's
cool to use it, but be careful and don't go insane ;)
.IP "\fB\-h\fR, \fB\-\-help\fR" 4
.IX Item "-h, --help"
Display a the list of available options and their brief description.
.IP "\fB\-v\fR, \fB\-\-version\fR" 4
.IX Item "-v, --version"
Displays the version of the \fBntkd\fR daemon.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Usually you'll just want to use \fBntkd\fR with a wifi device:
.PP
.Vb 2
\&        ntk-wifi wlan0
\&        ntkd -i wlan0
.Ve
.PP
If you one to use more than one network interface:
.PP
.Vb 1
\&        ntkd -i eth0 -i wlan0 -i wifi1 -i eth2
.Ve
.SH "SIGNALS"
.IX Header "SIGNALS"
When the \fB\s-1SIGHUP\s0\fR signal is sent to \fIntkd\fR\|(8), the \fIandna_hostnames\fR and
\&\fIsnsd_nodes\fR files will be reloaded and it will try to register all the new
added hostnames and snsd records.
.PP
When the \fB\s-1SIGALRM\s0\fR signal is sent to \fBntkd\fR, the resolved hostnames
cache is flushed.
.SH "LOGS"
.IX Header "LOGS"
If \fBntkd\fR is started as a daemon (without the \fB\-D\fR option), all the
logs are sent to syslog under the \s-1LOG_DAEMON\s0 category.
.PP
If the no-daemon option (\fB\-D\fR) is used, all the logs are printed to
\&\fIstderr\fR.
.SH "FILES"
.IX Header "FILES"
.IP "\fI/etc/netsukuku/netsukuku.conf\fR" 4
.IX Item "/etc/netsukuku/netsukuku.conf"
It is the default path for the \fBntkd\fR configuration file. It's
possible to choose another file using the \fB\-c\fR option.
.IP "\fI/etc/netsukuku/andna_hostnames\fR" 4
.IX Item "/etc/netsukuku/andna_hostnames"
It is the file where the hostnames to be registerd in \s-1ANDNA\s0 are kept one per
line. It's location can be changed by modifying the relative option in the
\&\fInetsukuku.conf\fR file.
.IP "\fI/etc/netsukuku/snsd_nodes\fR" 4
.IX Item "/etc/netsukuku/snsd_nodes"
The snsd_nodes_file keeps the list of the \s-1SNSD\s0 records which will be register
in \s-1ANDNA\s0. 
.IP "\fI/usr/share/netsukuku/ext_map_file\fR" 4
.IX Item "/usr/share/netsukuku/ext_map_file"
.PD 0
.IP "\fI/usr/share/netsukuku/int_map_file\fR" 4
.IX Item "/usr/share/netsukuku/int_map_file"
.IP "\fI/usr/share/netsukuku/bnode_map_file\fR" 4
.IX Item "/usr/share/netsukuku/bnode_map_file"
.PD
They are the Netsukuku maps saved by the daemon. Their locations can be
changed in \fInetsukuku.conf\fR.
.IP "\fI/usr/share/netsukuku/andna_lcl_keyring\fR" 4
.IX Item "/usr/share/netsukuku/andna_lcl_keyring"
In this keyring your \s-1ANDNA\s0 public and secret keys are saved. Handle this file
with care: without it, you won't be able to update your hostnames, thus 
you'll definitely lose them.
.IP "\fI/usr/share/netsukuku/andna_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_cache"
.PD 0
.IP "\fI/usr/share/netsukuku/andna_lcl_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_lcl_cache"
.IP "\fI/usr/share/netsukuku/andna_rh_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_rh_cache"
.IP "\fI/usr/share/netsukuku/andna_counter_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_counter_cache"
.PD
They are the saved \s-1ANDNA\s0 caches. Their locations can be changed in
\&\fInetsukuku.conf\fR.
.IP "\fI/etc/netsukuku/ip_masquerade.sh\fR" 4
.IX Item "/etc/netsukuku/ip_masquerade.sh"
This script is launched by NetsukukuD, at its start, when it shares the Internet
connection. The script will activate the \s-1IP\s0 masquerading.
The script is also used to disable the \s-1IP\s0 masquerading when \fBntkd\fR is closed.
.IP "\fI/etc/netsukuku/tc_shaper.sh\fR" 4
.IX Item "/etc/netsukuku/tc_shaper.sh"
This script manages the traffic shaping for the upload bandwidth.
It is executed by \fBntkd\fR at its start if its relative option has been
enabled.
.IP "\fI/var/run/ntkd.pid\fR" 4
.IX Item "/var/run/ntkd.pid"
It is the lock file created by ntkd at its start, it is used to check if other
instances of ntkd are already running.
Only one instance is allowed.
.SH "KERNEL DEPENDENCIES"
.IX Header "KERNEL DEPENDENCIES"
On Linux be sure to have the following options set in your kernel .config.
These options are taken from linux\-2.6.14.
.PP
.Vb 12
\&        #
\&        # Networking options
\&        #
\&        CONFIG_PACKET=y
\&        CONFIG_UNIX=y
\&        CONFIG_INET=y
\&        CONFIG_IP_MULTICAST=y
\&        CONFIG_IP_ADVANCED_ROUTER=y
\&        CONFIG_IP_MULTIPLE_TABLES=y
\&        CONFIG_IP_ROUTE_MULTIPATH=y
\&        CONFIG_NET_IPIP=y
\&        CONFIG_NETFILTER=y
.Ve
.PP
and these from linux\-2.6.16.19.
.PP
.Vb 3
\&        #
\&        # Core Netfilter Configuration
\&        #
.Ve
.PP
.Vb 2
\&        CONFIG_NETFILTER_XT_MATCH_CONNTRACK=y
\&        NETFILTER_XT_TARGET_CONNMARK=y
.Ve
.PP
.Vb 3
\&        #
\&        # IP: Netfilter Configuration
\&        #
.Ve
.PP
.Vb 6
\&        CONFIG_IP_NF_IPTABLES=y
\&        CONFIG_IP_NF_FILTER=y
\&        CONFIG_IP_NF_TARGET_REJECT=y
\&        CONFIG_IP_NF_NAT=y
\&        CONFIG_IP_NF_NAT_NEEDED=y
\&        CONFIG_IP_NF_TARGET_MASQUERADE=y
.Ve
.PP
If you are using modules you have to load them before launching the daemon.
.SH "BUGS"
.IX Header "BUGS"
{ Don't panic! }
.PP
If you encounter any bug, please report it.
Use the online bug track system: 
    <http://bugs.dyne.org/> 
.PP
or the mailing list:
    <http://lists.dyne.org/netsukuku/>
.PP
and explain what the problem is and if possible a way to reproduce it.
.SH "CONTACTS"
.IX Header "CONTACTS"
Subscrive to the netsukuku mailing to get help, be updated on the latest news
and discuss on its development.
.PP
To subscribe to the list, send a message to:
    netsukuku\-subscribe@lists.dyne.org
.PP
We live night and day in \s-1IRC\s0, come to see us in:
#netsukuku 
on the FreeNode irc server (irc.freenode.org).
.SH "AUTHORS"
.IX Header "AUTHORS"
Main authors and maintainers:
.PP
Andrea Lo Pumo aka AlpT <alpt@freaknet.org>
.PP
Main contributors:
.PP
Andrea Leofreddi <andrea.leofreddi@gmail.com>, Katolaz <katolaz@freaknet.org>,
Federico Tomassini <effetom@gmail.com>
.PP
For a complete list read the \s-1AUTHORS\s0 file or visit:
    <http://netsukuku.freaknet.org/?p=Contacts>
.SH "SEE ALSO"
.IX Header "SEE ALSO"
For more information about Netsukuku visit:
    <http://netsukuku.freaknet.org>
.PP
\&\fInetsukuku.conf\fR\|(5), \fIntk\-wifi\fR\|(8), \fIandna\fR\|(8), \fIiproute2\fR\|(8), \fIroute\fR\|(8)
